# Author: Zhuo Zhang <imzhuo@foxmail.com>
# Homepage: https://github.com/zchrissirhcz/cmake_tools
# Last update: 2024-05-26 23:30:00
cmake_minimum_required(VERSION 3.15)
include_guard()

#
# Usage:
# print_target_properties(opencv_core)
# print_directory_properties(.)
# print_global_properties()
#

function(print_target_properties TARGET)
  message("target properties for ${TARGET}")
  
  set(prop_lst 
    ADDITIONAL_CLEAN_FILES
    AIX_EXPORT_ALL_SYMBOLS
    ALIAS_GLOBAL
    ALIASED_TARGET
    ANDROID_ANT_ADDITIONAL_OPTIONS
    ANDROID_API
    ANDROID_API_MIN
    ANDROID_ARCH
    ANDROID_ASSETS_DIRECTORIES
    ANDROID_GUI
    ANDROID_JAR_DEPENDENCIES
    ANDROID_JAR_DIRECTORIES
    ANDROID_JAVA_SOURCE_DIR
    ANDROID_NATIVE_LIB_DEPENDENCIES
    ANDROID_NATIVE_LIB_DIRECTORIES
    ANDROID_PROCESS_MAX
    ANDROID_PROGUARD
    ANDROID_PROGUARD_CONFIG_PATH
    ANDROID_SECURE_PROPS_PATH
    ANDROID_SKIP_ANT_STEP
    ANDROID_STL_TYPE
    ARCHIVE_OUTPUT_DIRECTORY
    #ARCHIVE_OUTPUT_DIRECTORY_<CONFIG>
    ARCHIVE_OUTPUT_NAME
    #ARCHIVE_OUTPUT_NAME_<CONFIG>
    AUTOGEN_BETTER_GRAPH_MULTI_CONFIG
    AUTOGEN_BUILD_DIR
    AUTOGEN_COMMAND_LINE_LENGTH_MAX
    AUTOGEN_ORIGIN_DEPENDS
    AUTOGEN_PARALLEL
    AUTOGEN_TARGET_DEPENDS
    AUTOGEN_USE_SYSTEM_INCLUDE
    AUTOMOC
    AUTOMOC_COMPILER_PREDEFINES
    AUTOMOC_DEPEND_FILTERS
    AUTOMOC_EXECUTABLE
    AUTOMOC_MACRO_NAMES
    AUTOMOC_MOC_OPTIONS
    AUTOMOC_PATH_PREFIX
    AUTORCC
    AUTORCC_EXECUTABLE
    AUTORCC_OPTIONS
    AUTOUIC
    AUTOUIC_EXECUTABLE
    AUTOUIC_OPTIONS
    AUTOUIC_SEARCH_PATHS
    BINARY_DIR
    BUILD_RPATH
    BUILD_RPATH_USE_ORIGIN
    BUILD_WITH_INSTALL_NAME_DIR
    BUILD_WITH_INSTALL_RPATH
    BUNDLE
    BUNDLE_EXTENSION
    C_EXTENSIONS
    C_STANDARD
    C_STANDARD_REQUIRED
    COMMON_LANGUAGE_RUNTIME
    COMPATIBLE_INTERFACE_BOOL
    COMPATIBLE_INTERFACE_NUMBER_MAX
    COMPATIBLE_INTERFACE_NUMBER_MIN
    COMPATIBLE_INTERFACE_STRING
    COMPILE_DEFINITIONS
    COMPILE_FEATURES
    COMPILE_FLAGS
    COMPILE_OPTIONS
    COMPILE_PDB_NAME
    #COMPILE_PDB_NAME_<CONFIG>
    COMPILE_PDB_OUTPUT_DIRECTORY
    #COMPILE_PDB_OUTPUT_DIRECTORY_<CONFIG>
    COMPILE_WARNING_AS_ERROR
    #<CONFIG>_OUTPUT_NAME
    #<CONFIG>_POSTFIX

    CROSSCOMPILING_EMULATOR
    CUDA_ARCHITECTURES
    CUDA_CUBIN_COMPILATION
    CUDA_EXTENSIONS
    CUDA_FATBIN_COMPILATION
    CUDA_OPTIX_COMPILATION
    CUDA_PTX_COMPILATION
    CUDA_RESOLVE_DEVICE_SYMBOLS
    CUDA_RUNTIME_LIBRARY
    CUDA_SEPARABLE_COMPILATION
    CUDA_STANDARD
    CUDA_STANDARD_REQUIRED
    CXX_EXTENSIONS
    CXX_MODULE_DIRS
    #CXX_MODULE_DIRS_<NAME>
    CXX_MODULE_SET
    #CXX_MODULE_SET_<NAME>
    CXX_MODULE_SETS
    CXX_SCAN_FOR_MODULES
    CXX_STANDARD
    CXX_STANDARD_REQUIRED
    DEBUG_POSTFIX
    DEFINE_SYMBOL
    DEPLOYMENT_ADDITIONAL_FILES
    DEPLOYMENT_REMOTE_DIRECTORY
    DEPRECATION
    DISABLE_PRECOMPILE_HEADERS
    DLL_NAME_WITH_SOVERSION
    DOTNET_SDK
    DOTNET_TARGET_FRAMEWORK
    DOTNET_TARGET_FRAMEWORK_VERSION
    EchoString
    ENABLE_EXPORTS
    EXCLUDE_FROM_ALL
    EXCLUDE_FROM_DEFAULT_BUILD
    #EXCLUDE_FROM_DEFAULT_BUILD_<CONFIG>
    EXPORT_COMPILE_COMMANDS
    EXPORT_FIND_PACKAGE_NAME
    EXPORT_NAME
    EXPORT_NO_SYSTEM
    EXPORT_PROPERTIES
    FOLDER
    Fortran_BUILDING_INSTRINSIC_MODULES
    Fortran_FORMAT
    Fortran_MODULE_DIRECTORY
    Fortran_PREPROCESS
    FRAMEWORK
    #FRAMEWORK_MULTI_CONFIG_POSTFIX_<CONFIG>
    FRAMEWORK_VERSION
    GENERATOR_FILE_NAME
    GHS_INTEGRITY_APP
    GHS_NO_SOURCE_GROUP_FILE
    GNUtoMS
    HAS_CXX
    HEADER_DIRS
    #HEADER_DIRS_<NAME>
    HEADER_SET
    #HEADER_SET_<NAME>
    HEADER_SETS
    HIP_ARCHITECTURES
    HIP_EXTENSIONS
    HIP_STANDARD
    HIP_STANDARD_REQUIRED
    IMPLICIT_DEPENDS_INCLUDE_TRANSFORM
    IMPORTED
    IMPORTED_COMMON_LANGUAGE_RUNTIME
    IMPORTED_CONFIGURATIONS
    IMPORTED_CXX_MODULES_COMPILE_DEFINITIONS
    IMPORTED_CXX_MODULES_COMPILE_FEATURES
    IMPORTED_CXX_MODULES_COMPILE_OPTIONS
    IMPORTED_CXX_MODULES_INCLUDE_DIRECTORIES
    IMPORTED_CXX_MODULES_LINK_LIBRARIES
    IMPORTED_GLOBAL
    IMPORTED_IMPLIB
    #IMPORTED_IMPLIB_<CONFIG>
    IMPORTED_LIBNAME
    #IMPORTED_LIBNAME_<CONFIG>
    IMPORTED_LINK_DEPENDENT_LIBRARIES
    #IMPORTED_LINK_DEPENDENT_LIBRARIES_<CONFIG>
    IMPORTED_LINK_INTERFACE_LANGUAGES
    #IMPORTED_LINK_INTERFACE_LANGUAGES_<CONFIG>
    IMPORTED_LINK_INTERFACE_LIBRARIES
    #IMPORTED_LINK_INTERFACE_LIBRARIES_<CONFIG>
    IMPORTED_LINK_INTERFACE_MULTIPLICITY
    #IMPORTED_LINK_INTERFACE_MULTIPLICITY_<CONFIG>
    IMPORTED_LOCATION
    #IMPORTED_LOCATION_<CONFIG>
    IMPORTED_NO_SONAME
    #IMPORTED_NO_SONAME_<CONFIG>
    IMPORTED_OBJECTS
    #IMPORTED_OBJECTS_<CONFIG>
    IMPORTED_SONAME
    #IMPORTED_SONAME_<CONFIG>
    IMPORT_PREFIX
    IMPORT_SUFFIX
    INCLUDE_DIRECTORIES
    INSTALL_NAME_DIR
    INSTALL_REMOVE_ENVIRONMENT_RPATH
    INSTALL_RPATH
    INSTALL_RPATH_USE_LINK_PATH
    INTERFACE_AUTOMOC_MACRO_NAMES
    INTERFACE_AUTOUIC_OPTIONS
    INTERFACE_COMPILE_DEFINITIONS
    INTERFACE_COMPILE_FEATURES
    INTERFACE_COMPILE_OPTIONS
    INTERFACE_CXX_MODULE_SETS
    INTERFACE_HEADER_SETS
    INTERFACE_HEADER_SETS_TO_VERIFY
    INTERFACE_INCLUDE_DIRECTORIES
    INTERFACE_LINK_DEPENDS
    INTERFACE_LINK_DIRECTORIES
    INTERFACE_LINK_LIBRARIES
    INTERFACE_LINK_LIBRARIES_DIRECT
    INTERFACE_LINK_LIBRARIES_DIRECT_EXCLUDE
    INTERFACE_LINK_OPTIONS
    INTERFACE_POSITION_INDEPENDENT_CODE
    INTERFACE_PRECOMPILE_HEADERS
    INTERFACE_SOURCES
    INTERFACE_SYSTEM_INCLUDE_DIRECTORIES
    INTERPROCEDURAL_OPTIMIZATION
    #INTERPROCEDURAL_OPTIMIZATION_<CONFIG>
    ISPC_HEADER_DIRECTORY
    ISPC_HEADER_SUFFIX
    ISPC_INSTRUCTION_SETS
    JOB_POOL_COMPILE
    JOB_POOL_LINK
    JOB_POOL_PRECOMPILE_HEADER
    LABELS

    C_CLANG_TIDY
    C_CLANG_TIDY_EXPORT_FIXES_DIR
    C_COMPILER_LAUNCHER
    C_CPPCHECK
    C_CPPLINT
    C_EXTENSIONS
    C_INCLUDE_WHAT_YOU_USE
    C_LINKER_LAUNCHER
    C_STANDARD
    C_STANDARD_REQUIRED
    C_VISIBILITY_PRESET

    CXX_CLANG_TIDY
    CXX_CLANG_TIDY_EXPORT_FIXES_DIR
    CXX_COMPILER_LAUNCHER
    CXX_CPPCHECK
    CXX_CPPLINT
    CXX_EXTENSIONS
    CXX_INCLUDE_WHAT_YOU_USE
    CXX_LINKER_LAUNCHER
    CXX_STANDARD
    CXX_STANDARD_REQUIRED
    CXX_VISIBILITY_PRESET

    LIBRARY_OUTPUT_DIRECTORY
    #LIBRARY_OUTPUT_DIRECTORY_<CONFIG>
    LIBRARY_OUTPUT_NAME
    #LIBRARY_OUTPUT_NAME_<CONFIG>
    LINK_DEPENDS
    LINK_DEPENDS_NO_SHARED
    LINK_DIRECTORIES
    LINK_FLAGS
    #LINK_FLAGS_<CONFIG>
    LINK_INTERFACE_LIBRARIES
    #LINK_INTERFACE_LIBRARIES_<CONFIG>
    LINK_INTERFACE_MULTIPLICITY
    #LINK_INTERFACE_MULTIPLICITY_<CONFIG>
    LINK_LIBRARIES
    LINK_LIBRARIES_ONLY_TARGETS
    LINK_LIBRARY_OVERRIDE
    #LINK_LIBRARY_OVERRIDE_<LIBRARY>
    LINK_OPTIONS
    LINK_SEARCH_END_STATIC
    LINK_SEARCH_START_STATIC
    LINK_WHAT_YOU_USE
    LINKER_LANGUAGE
    LINKER_TYPE
    LOCATION
    #LOCATION_<CONFIG>
    MACHO_COMPATIBILITY_VERSION
    MACHO_CURRENT_VERSION
    MACOSX_BUNDLE
    MACOSX_BUNDLE_INFO_PLIST
    MACOSX_FRAMEWORK_INFO_PLIST
    MACOSX_RPATH
    MANUALLY_ADDED_DEPENDENCIES
    #MAP_IMPORTED_CONFIG_<CONFIG>
    MSVC_DEBUG_INFORMATION_FORMAT
    MSVC_RUNTIME_LIBRARY
    NAME
    NO_SONAME
    NO_SYSTEM_FROM_IMPORTED
    OBJC_EXTENSIONS
    OBJC_STANDARD
    OBJC_STANDARD_REQUIRED
    OBJCXX_EXTENSIONS
    OBJCXX_STANDARD
    OBJCXX_STANDARD_REQUIRED
    OPTIMIZE_DEPENDENCIES
    OSX_ARCHITECTURES
    #OSX_ARCHITECTURES_<CONFIG>
    OUTPUT_NAME
    #OUTPUT_NAME_<CONFIG>
    PCH_INSTANTIATE_TEMPLATES
    PCH_WARN_INVALID
    PDB_NAME
    #PDB_NAME_<CONFIG>
    PDB_OUTPUT_DIRECTORY
    #PDB_OUTPUT_DIRECTORY_<CONFIG>
    POSITION_INDEPENDENT_CODE
    PRECOMPILE_HEADERS
    PRECOMPILE_HEADERS_REUSE_FROM
    PREFIX
    PRIVATE_HEADER
    PROJECT_LABEL
    PUBLIC_HEADER
    RESOURCE
    RULE_LAUNCH_COMPILE
    RULE_LAUNCH_CUSTOM
    RULE_LAUNCH_LINK
    RUNTIME_OUTPUT_DIRECTORY
    #RUNTIME_OUTPUT_DIRECTORY_<CONFIG>
    RUNTIME_OUTPUT_NAME
    #RUNTIME_OUTPUT_NAME_<CONFIG>
    SKIP_BUILD_RPATH
    SOURCE_DIR
    SOURCES
    SOVERSION
    STATIC_LIBRARY_FLAGS
    #STATIC_LIBRARY_FLAGS_<CONFIG>
    STATIC_LIBRARY_OPTIONS
    SUFFIX
    Swift_COMPILATION_MODE
    Swift_DEPENDENCIES_FILE
    Swift_LANGUAGE_VERSION
    Swift_MODULE_DIRECTORY
    Swift_MODULE_NAME
    SYSTEM
    TEST_LAUNCHER
    TYPE
    UNITY_BUILD
    UNITY_BUILD_BATCH_SIZE
    UNITY_BUILD_CODE_AFTER_INCLUDE
    UNITY_BUILD_CODE_BEFORE_INCLUDE
    UNITY_BUILD_MODE
    UNITY_BUILD_UNIQUE_ID
    VERIFY_INTERFACE_HEADER_SETS
    VERSION
    VISIBILITY_INLINES_HIDDEN
    VS_CONFIGURATION_TYPE
    VS_DEBUGGER_COMMAND
    VS_DEBUGGER_COMMAND_ARGUMENTS
    VS_DEBUGGER_ENVIRONMENT
    VS_DEBUGGER_WORKING_DIRECTORY
    VS_DESKTOP_EXTENSIONS_VERSION
    VS_DOTNET_DOCUMENTATION_FILE
    #VS_DOTNET_REFERENCE_<refname>
    #VS_DOTNET_REFERENCEPROP_<refname>_TAG_<tagname>
    VS_DOTNET_REFERENCES
    VS_DOTNET_REFERENCES_COPY_LOCAL
    VS_DOTNET_STARTUP_OBJECT
    VS_DOTNET_TARGET_FRAMEWORK_VERSION
    VS_DPI_AWARE
    VS_GLOBAL_KEYWORD
    VS_GLOBAL_PROJECT_TYPES
    VS_GLOBAL_ROOTNAMESPACE
    VS_GLOBAL_<variable>
    VS_IOT_EXTENSIONS_VERSION
    VS_IOT_STARTUP_TASK
    VS_JUST_MY_CODE_DEBUGGING
    VS_KEYWORD
    VS_MOBILE_EXTENSIONS_VERSION
    VS_NO_COMPILE_BATCHING
    VS_NO_SOLUTION_DEPLOY
    VS_PACKAGE_REFERENCES
    VS_PLATFORM_TOOLSET
    VS_PROJECT_IMPORT
    VS_SCC_AUXPATH
    VS_SCC_LOCALPATH
    VS_SCC_PROJECTNAME
    VS_SCC_PROVIDER
    VS_SDK_REFERENCES
    VS_SOLUTION_DEPLOY
    #VS_SOURCE_SETTINGS_<tool>
    VS_USER_PROPS
    VS_WINDOWS_TARGET_PLATFORM_MIN_VERSION
    VS_WINRT_COMPONENT
    VS_WINRT_REFERENCES
    WATCOM_RUNTIME_LIBRARY
    WIN32_EXECUTABLE
    WINDOWS_EXPORT_ALL_SYMBOLS
    #XCODE_ATTRIBUTE_<an-attribute>
    XCODE_EMBED_FRAMEWORKS_CODE_SIGN_ON_COPY
    XCODE_EMBED_FRAMEWORKS_REMOVE_HEADERS_ON_COPY
    # XCODE_EMBED_<type>
    # XCODE_EMBED_<type>_CODE_SIGN_ON_COPY
    # XCODE_EMBED_<type>_PATH
    # XCODE_EMBED_<type>_REMOVE_HEADERS_ON_COPY
    XCODE_EXPLICIT_FILE_TYPE
    XCODE_GENERATE_SCHEME
    XCODE_LINK_BUILD_PHASE_MODE
    XCODE_PRODUCT_TYPE
    XCODE_SCHEME_ADDRESS_SANITIZER
    XCODE_SCHEME_ADDRESS_SANITIZER_USE_AFTER_RETURN
    XCODE_SCHEME_ARGUMENTS
    XCODE_SCHEME_DEBUG_AS_ROOT
    XCODE_SCHEME_DEBUG_DOCUMENT_VERSIONING
    XCODE_SCHEME_DISABLE_MAIN_THREAD_CHECKER
    XCODE_SCHEME_DYNAMIC_LIBRARY_LOADS
    XCODE_SCHEME_DYNAMIC_LINKER_API_USAGE
    XCODE_SCHEME_ENABLE_GPU_API_VALIDATION
    XCODE_SCHEME_ENABLE_GPU_FRAME_CAPTURE_MODE
    XCODE_SCHEME_ENABLE_GPU_SHADER_VALIDATION
    XCODE_SCHEME_ENVIRONMENT
    XCODE_SCHEME_EXECUTABLE
    XCODE_SCHEME_GUARD_MALLOC
    XCODE_SCHEME_LAUNCH_CONFIGURATION
    XCODE_SCHEME_LAUNCH_MODE
    XCODE_SCHEME_MAIN_THREAD_CHECKER_STOP
    XCODE_SCHEME_MALLOC_GUARD_EDGES
    XCODE_SCHEME_MALLOC_SCRIBBLE
    XCODE_SCHEME_MALLOC_STACK
    XCODE_SCHEME_THREAD_SANITIZER
    XCODE_SCHEME_THREAD_SANITIZER_STOP
    XCODE_SCHEME_UNDEFINED_BEHAVIOUR_SANITIZER
    XCODE_SCHEME_UNDEFINED_BEHAVIOUR_SANITIZER_STOP
    XCODE_SCHEME_WORKING_DIRECTORY
    XCODE_SCHEME_ZOMBIE_OBJECTS
    XCODE_XCCONFIG
    XCTEST
  )

  foreach(prop ${prop_lst})
    # get_target_property(${prop} ${TARGET} ${prop})
    # message(" ${prop}: ${${prop}}")
    get_target_property(prop_value ${TARGET} ${prop})
    if(prop_value)
      message(" ${prop}: ${prop_value}")
    endif()
  endforeach()
endfunction()


function(print_directory_properties DIRECTORY)
  message("directory properties for ${DIRECTORY}")
  
  set(prop_lst
    ADDITIONAL_CLEAN_FILES
    BINARY_DIR
    BUILDSYSTEM_TARGETS
    CACHE_VARIABLES
    CLEAN_NO_CUSTOM
    CMAKE_CONFIGURE_DEPENDS
    COMPILE_DEFINITIONS
    COMPILE_OPTIONS
    DEFINITIONS
    EXCLUDE_FROM_ALL
    IMPLICIT_DEPENDS_INCLUDE_TRANSFORM
    IMPORTED_TARGETS
    INCLUDE_DIRECTORIES
    INCLUDE_REGULAR_EXPRESSION
    LABELS
    LINK_DIRECTORIES
    LINK_OPTIONS
    LISTFILE_STACK
    MACROS
    PARENT_DIRECTORY
    RULE_LAUNCH_COMPILE
    RULE_LAUNCH_CUSTOM
    RULE_LAUNCH_LINK
    SOURCE_DIR
    SUBDIRECTORIES
    SYSTEM
    TESTS
    TEST_INCLUDE_FILES
    VARIABLES
    VS_GLOBAL_SECTION_POST_<section>
    VS_GLOBAL_SECTION_PRE_<section>
    VS_STARTUP_PROJECT
  )
  foreach(prop ${prop_lst})
    get_directory_property(prop_value
      DIRECTORY ${DIRECTORY}
      ${prop}
    )
    if(prop_value)
      message(" ${prop}: ${prop_value}")
    endif()
  endforeach()
endfunction()

function(print_global_properties)
  message("global properties:")
  set(prop_lst
    ALLOW_DUPLICATE_CUSTOM_TARGETS
    AUTOGEN_SOURCE_GROUP
    AUTOGEN_TARGETS_FOLDER
    AUTOMOC_SOURCE_GROUP
    AUTOMOC_TARGETS_FOLDER
    AUTORCC_SOURCE_GROUP
    AUTOUIC_SOURCE_GROUP
    CMAKE_C_KNOWN_FEATURES
    CMAKE_CUDA_KNOWN_FEATURES
    CMAKE_CXX_KNOWN_FEATURES
    CMAKE_ROLE
    DEBUG_CONFIGURATIONS
    DISABLED_FEATURES
    ECLIPSE_EXTRA_CPROJECT_CONTENTS
    ECLIPSE_EXTRA_NATURES
    ENABLED_FEATURES
    ENABLED_LANGUAGES
    FIND_LIBRARY_USE_LIB32_PATHS
    FIND_LIBRARY_USE_LIB64_PATHS
    FIND_LIBRARY_USE_LIBX32_PATHS
    FIND_LIBRARY_USE_OPENBSD_VERSIONING
    GENERATOR_IS_MULTI_CONFIG
    GLOBAL_DEPENDS_DEBUG_MODE
    GLOBAL_DEPENDS_NO_CYCLES
    IN_TRY_COMPILE
    JOB_POOLS
    PACKAGES_FOUND
    PACKAGES_NOT_FOUND
    PREDEFINED_TARGETS_FOLDER
    REPORT_UNDEFINED_PROPERTIES
    RULE_LAUNCH_COMPILE
    RULE_LAUNCH_CUSTOM
    RULE_LAUNCH_LINK
    RULE_MESSAGES
    TARGET_ARCHIVES_MAY_BE_SHARED_LIBS
    TARGET_MESSAGES
    TARGET_SUPPORTS_SHARED_LIBS
    USE_FOLDERS
    XCODE_EMIT_EFFECTIVE_PLATFORM_NAME
  )

  foreach(prop ${prop_lst})
    get_property(prop_value
      GLOBAL
      PROPERTY DEBUG_CONFIGURATIONS
    )
    if(prop_value)
      message(" ${prop}: ${prop_value}")
    endif()
  endforeach()
endfunction()